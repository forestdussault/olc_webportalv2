{% extends "base.html" %}
{#Head container#}
{% load bootstrap %}
{% load render_table from django_tables2 %}
{% block content %}
    <h1>ConFindr Results For Project {{ project.project_title }}</h1>
    <br>
        {#Genesippr Table#}
    <button type="button" class="btn btn-info btn-block" data-toggle="collapse" data-target="#confindr-results"><strong>View ConFindr Results</strong></button>
    <br>
    <div id="confindr-results" class="collapse">
        <table class="table table-hover table-sm table-responsive table-bordered" id="confindr-table">
            {#Table headers#}
        <thead>
            <tr>
                <th>Sample</th>
                <th>Genera Present</th>
                <th>Contaminating SNVs</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for sample in project.samples.all %}
            {% for confindr_project in sample.confindr_results.all %}
            <tr>
                {#Genesippr table results#}
                <td>{{ confindr_project.strain }}</td>
                <td>{{ confindr_project.genera_present }}</td>
                <td>{{ confindr_project.contam_snvs }}</td>
                {% if confindr_project.contaminated == 'False' %}
                <td align="center" class="table-success">
                    <i class="fa fa-check-circle fa-1x"></i>
                </td>
                {% else %}
                   <td align="center" class="table-danger">
                    <i class="fa fa-check-circle fa-1x"></i>
                </td>
                {% endif %}

            </tr>
            {% endfor %}
            {% endfor %}
        </tbody>
        </table>
    <script src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css">

    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
        <script type="text/javascript">
        $(document).ready(function () {
            $('#confindr-table').dataTable()
        });
        </script>
    </div>
{% endblock %}
